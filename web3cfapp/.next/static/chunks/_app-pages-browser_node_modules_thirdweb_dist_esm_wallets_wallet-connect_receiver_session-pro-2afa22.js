"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_thirdweb_dist_esm_wallets_wallet-connect_receiver_session-pro-2afa22"],{

/***/ "(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-proposal.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-proposal.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   acceptSessionProposal: () => (/* binding */ acceptSessionProposal),\n/* harmony export */   disconnectExistingSessions: () => (/* binding */ disconnectExistingSessions),\n/* harmony export */   onSessionProposal: () => (/* binding */ onSessionProposal)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ \"(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/index.js\");\n/* harmony import */ var _session_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session-store.js */ \"(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-store.js\");\n\n\n/**\n * @internal\n */\nasync function onSessionProposal(options) {\n    const { wallet, walletConnectClient, event, chains, onConnect } = options;\n    const account = wallet.getAccount();\n    if (!account) {\n        throw new Error(\"No account connected to provided wallet\");\n    }\n    const origin = event.verifyContext?.verified?.origin;\n    if (origin) {\n        await disconnectExistingSessions({ origin, walletConnectClient });\n    }\n    const session = await acceptSessionProposal({\n        account,\n        chains,\n        sessionProposal: event,\n        walletConnectClient,\n    });\n    await (0,_session_store_js__WEBPACK_IMPORTED_MODULE_0__.saveSession)(session);\n    wallet.subscribe(\"disconnect\", () => {\n        (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.disconnectWalletConnectSession)({ session, walletConnectClient });\n    });\n    onConnect?.(session);\n}\n/**\n * @internal\n */\nasync function disconnectExistingSessions({ walletConnectClient, origin, }) {\n    const sessions = await (0,_session_store_js__WEBPACK_IMPORTED_MODULE_0__.getSessions)();\n    for (const session of sessions) {\n        if (session.origin === origin) {\n            await (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.disconnectWalletConnectSession)({ session, walletConnectClient });\n        }\n    }\n}\n/**\n * @internal\n */\nasync function acceptSessionProposal({ account, walletConnectClient, sessionProposal, chains, }) {\n    if (!sessionProposal.params.requiredNamespaces?.eip155 &&\n        !sessionProposal.params.optionalNamespaces?.eip155) {\n        throw new Error(\"No EIP155 namespace found in Wallet Connect session proposal\");\n    }\n    const namespaces = {\n        chains: [\n            ...Array.from(new Set([\n                ...(sessionProposal.params.requiredNamespaces?.eip155?.chains?.map((chain) => `${chain}:${account.address}`) ?? []),\n                ...(sessionProposal.params.optionalNamespaces?.eip155?.chains?.map((chain) => `${chain}:${account.address}`) ?? []),\n                ...(chains?.map((chain) => `eip155:${chain.id}:${account.address}`) ??\n                    []),\n            ])),\n        ],\n        events: [\n            ...(sessionProposal.params.requiredNamespaces?.eip155?.events ?? []),\n            ...(sessionProposal.params.optionalNamespaces?.eip155?.events ?? []),\n        ],\n        methods: [\n            ...(sessionProposal.params.requiredNamespaces?.eip155?.methods ?? []),\n            ...(sessionProposal.params.optionalNamespaces?.eip155?.methods ?? []),\n        ],\n    };\n    const approval = await walletConnectClient.approve({\n        id: sessionProposal.id,\n        namespaces: {\n            eip155: {\n                accounts: namespaces.chains,\n                events: namespaces.events,\n                methods: namespaces.methods,\n            },\n        },\n    });\n    const session = await approval.acknowledged();\n    return {\n        origin: sessionProposal.verifyContext?.verified?.origin || \"Unknown origin\",\n        topic: session.topic,\n    };\n}\n//# sourceMappingURL=session-proposal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy90aGlyZHdlYi9kaXN0L2VzbS93YWxsZXRzL3dhbGxldC1jb25uZWN0L3JlY2VpdmVyL3Nlc3Npb24tcHJvcG9zYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEQ7QUFDRTtBQUM5RDtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksd0RBQXdEO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw2QkFBNkI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFVBQVUsOERBQVc7QUFDckI7QUFDQSxRQUFRLHlFQUE4QixHQUFHLDhCQUE4QjtBQUN2RSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDRDQUE0Qyw4QkFBOEI7QUFDakYsMkJBQTJCLDhEQUFXO0FBQ3RDO0FBQ0E7QUFDQSxrQkFBa0IseUVBQThCLEdBQUcsOEJBQThCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHVDQUF1Qyx3REFBd0Q7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsTUFBTSxHQUFHLGdCQUFnQjtBQUMxSCxpR0FBaUcsTUFBTSxHQUFHLGdCQUFnQjtBQUMxSCxxREFBcUQsU0FBUyxHQUFHLGdCQUFnQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZGFuaWxvL0RldmVsb3Blci9FTlYvQmxvY2tjaGFpbi93ZWIzcHJvamVjdHMvd2ViM2NmL3dlYjNjZmFwcC9ub2RlX21vZHVsZXMvdGhpcmR3ZWIvZGlzdC9lc20vd2FsbGV0cy93YWxsZXQtY29ubmVjdC9yZWNlaXZlci9zZXNzaW9uLXByb3Bvc2FsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRpc2Nvbm5lY3RXYWxsZXRDb25uZWN0U2Vzc2lvbiB9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9ucywgc2F2ZVNlc3Npb24gfSBmcm9tIFwiLi9zZXNzaW9uLXN0b3JlLmpzXCI7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb25TZXNzaW9uUHJvcG9zYWwob3B0aW9ucykge1xuICAgIGNvbnN0IHsgd2FsbGV0LCB3YWxsZXRDb25uZWN0Q2xpZW50LCBldmVudCwgY2hhaW5zLCBvbkNvbm5lY3QgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgYWNjb3VudCA9IHdhbGxldC5nZXRBY2NvdW50KCk7XG4gICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjY291bnQgY29ubmVjdGVkIHRvIHByb3ZpZGVkIHdhbGxldFwiKTtcbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luID0gZXZlbnQudmVyaWZ5Q29udGV4dD8udmVyaWZpZWQ/Lm9yaWdpbjtcbiAgICBpZiAob3JpZ2luKSB7XG4gICAgICAgIGF3YWl0IGRpc2Nvbm5lY3RFeGlzdGluZ1Nlc3Npb25zKHsgb3JpZ2luLCB3YWxsZXRDb25uZWN0Q2xpZW50IH0pO1xuICAgIH1cbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgYWNjZXB0U2Vzc2lvblByb3Bvc2FsKHtcbiAgICAgICAgYWNjb3VudCxcbiAgICAgICAgY2hhaW5zLFxuICAgICAgICBzZXNzaW9uUHJvcG9zYWw6IGV2ZW50LFxuICAgICAgICB3YWxsZXRDb25uZWN0Q2xpZW50LFxuICAgIH0pO1xuICAgIGF3YWl0IHNhdmVTZXNzaW9uKHNlc3Npb24pO1xuICAgIHdhbGxldC5zdWJzY3JpYmUoXCJkaXNjb25uZWN0XCIsICgpID0+IHtcbiAgICAgICAgZGlzY29ubmVjdFdhbGxldENvbm5lY3RTZXNzaW9uKHsgc2Vzc2lvbiwgd2FsbGV0Q29ubmVjdENsaWVudCB9KTtcbiAgICB9KTtcbiAgICBvbkNvbm5lY3Q/LihzZXNzaW9uKTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaXNjb25uZWN0RXhpc3RpbmdTZXNzaW9ucyh7IHdhbGxldENvbm5lY3RDbGllbnQsIG9yaWdpbiwgfSkge1xuICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgZ2V0U2Vzc2lvbnMoKTtcbiAgICBmb3IgKGNvbnN0IHNlc3Npb24gb2Ygc2Vzc2lvbnMpIHtcbiAgICAgICAgaWYgKHNlc3Npb24ub3JpZ2luID09PSBvcmlnaW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGRpc2Nvbm5lY3RXYWxsZXRDb25uZWN0U2Vzc2lvbih7IHNlc3Npb24sIHdhbGxldENvbm5lY3RDbGllbnQgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWNjZXB0U2Vzc2lvblByb3Bvc2FsKHsgYWNjb3VudCwgd2FsbGV0Q29ubmVjdENsaWVudCwgc2Vzc2lvblByb3Bvc2FsLCBjaGFpbnMsIH0pIHtcbiAgICBpZiAoIXNlc3Npb25Qcm9wb3NhbC5wYXJhbXMucmVxdWlyZWROYW1lc3BhY2VzPy5laXAxNTUgJiZcbiAgICAgICAgIXNlc3Npb25Qcm9wb3NhbC5wYXJhbXMub3B0aW9uYWxOYW1lc3BhY2VzPy5laXAxNTUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gRUlQMTU1IG5hbWVzcGFjZSBmb3VuZCBpbiBXYWxsZXQgQ29ubmVjdCBzZXNzaW9uIHByb3Bvc2FsXCIpO1xuICAgIH1cbiAgICBjb25zdCBuYW1lc3BhY2VzID0ge1xuICAgICAgICBjaGFpbnM6IFtcbiAgICAgICAgICAgIC4uLkFycmF5LmZyb20obmV3IFNldChbXG4gICAgICAgICAgICAgICAgLi4uKHNlc3Npb25Qcm9wb3NhbC5wYXJhbXMucmVxdWlyZWROYW1lc3BhY2VzPy5laXAxNTU/LmNoYWlucz8ubWFwKChjaGFpbikgPT4gYCR7Y2hhaW59OiR7YWNjb3VudC5hZGRyZXNzfWApID8/IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4oc2Vzc2lvblByb3Bvc2FsLnBhcmFtcy5vcHRpb25hbE5hbWVzcGFjZXM/LmVpcDE1NT8uY2hhaW5zPy5tYXAoKGNoYWluKSA9PiBgJHtjaGFpbn06JHthY2NvdW50LmFkZHJlc3N9YCkgPz8gW10pLFxuICAgICAgICAgICAgICAgIC4uLihjaGFpbnM/Lm1hcCgoY2hhaW4pID0+IGBlaXAxNTU6JHtjaGFpbi5pZH06JHthY2NvdW50LmFkZHJlc3N9YCkgPz9cbiAgICAgICAgICAgICAgICAgICAgW10pLFxuICAgICAgICAgICAgXSkpLFxuICAgICAgICBdLFxuICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgIC4uLihzZXNzaW9uUHJvcG9zYWwucGFyYW1zLnJlcXVpcmVkTmFtZXNwYWNlcz8uZWlwMTU1Py5ldmVudHMgPz8gW10pLFxuICAgICAgICAgICAgLi4uKHNlc3Npb25Qcm9wb3NhbC5wYXJhbXMub3B0aW9uYWxOYW1lc3BhY2VzPy5laXAxNTU/LmV2ZW50cyA/PyBbXSksXG4gICAgICAgIF0sXG4gICAgICAgIG1ldGhvZHM6IFtcbiAgICAgICAgICAgIC4uLihzZXNzaW9uUHJvcG9zYWwucGFyYW1zLnJlcXVpcmVkTmFtZXNwYWNlcz8uZWlwMTU1Py5tZXRob2RzID8/IFtdKSxcbiAgICAgICAgICAgIC4uLihzZXNzaW9uUHJvcG9zYWwucGFyYW1zLm9wdGlvbmFsTmFtZXNwYWNlcz8uZWlwMTU1Py5tZXRob2RzID8/IFtdKSxcbiAgICAgICAgXSxcbiAgICB9O1xuICAgIGNvbnN0IGFwcHJvdmFsID0gYXdhaXQgd2FsbGV0Q29ubmVjdENsaWVudC5hcHByb3ZlKHtcbiAgICAgICAgaWQ6IHNlc3Npb25Qcm9wb3NhbC5pZCxcbiAgICAgICAgbmFtZXNwYWNlczoge1xuICAgICAgICAgICAgZWlwMTU1OiB7XG4gICAgICAgICAgICAgICAgYWNjb3VudHM6IG5hbWVzcGFjZXMuY2hhaW5zLFxuICAgICAgICAgICAgICAgIGV2ZW50czogbmFtZXNwYWNlcy5ldmVudHMsXG4gICAgICAgICAgICAgICAgbWV0aG9kczogbmFtZXNwYWNlcy5tZXRob2RzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgYXBwcm92YWwuYWNrbm93bGVkZ2VkKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3JpZ2luOiBzZXNzaW9uUHJvcG9zYWwudmVyaWZ5Q29udGV4dD8udmVyaWZpZWQ/Lm9yaWdpbiB8fCBcIlVua25vd24gb3JpZ2luXCIsXG4gICAgICAgIHRvcGljOiBzZXNzaW9uLnRvcGljLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLXByb3Bvc2FsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-proposal.js\n"));

/***/ })

}]);